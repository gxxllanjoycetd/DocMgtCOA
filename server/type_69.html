<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document Management System</title>
    <link rel="stylesheet" href="style.css">
</head>

<body style=width:100%;height:auto;>
    <div>
        <img src="dash.png " style=width:100%;height:auto;margin-top:5px; />
    </div>
    <div style=font-size:20px;>
        <center>Advertising Expenses</center>
    </div>
    <section>
        <article>
            <div id="myDIV" class="header">
                <h2 style="margin:5px">Supporting Documentary Requirements</h2>
                <input type="text" id="myInput" placeholder="Additional Requirements">
                <span onclick="newElement()" class="addBtn">Add</span>
            </div>

            <ul id="myUL">
                <li>Certificate of Availability of Funds issued by the Chief Accountant</li>
                <li>Existence of lawful and sufficient allotment duly obligated as certified by authorized officials [except for government-owned and controlled corporations/government financing institutions (GOCCs/GFIs)]
                </li>
                <li>Legality of transaction and conformity with laws, rules or regulations</li>
                <li>Approval of expenditure by Head of Office or his authorized representative</li>
                <li>Sufficient and relevant documents to establish validity of claim</li>
                <li>Authenticated photocopy of the approved APP and any amendment thereto</li>
                <li>Approved contract supported by the documents which are required under COA Circular No. 2009-001 dated February 12, 2009 and COA Memorandum No. 2005-027 dated February 28, 2005 to be submitted to the Auditor 's Office within five days from
                    the execution of the contract</li>
                <li>Copy of Advertisement of Invitation to Bid/Request for expression of interest</li>
                <li>Documentary requirements under Sections 23.l and 25.2.b for infrastructure projects, 23.1 and 25.2a for goods and 24.1 and 25.2c for consulting services, of the Revised IRR of RA No. 9184</li>
                <li>Minutes of Pre-procurement Conference for projects costing above P5.0 million for infrastructure, P2.0 million ' and above for goods, and 1.0 million and above for consulting services</li>
                <li>Bid Evaluation Report</li>
                <li>Ranking of short listed bidders for consulting services</li>
                <li>Post Qualification Evaluation Report</li>
                <li>Printout copy of posting of Notice of Award, Notice to Proceed and Contract of award in the PhilGEPS</li>
                <li>For LGUs, as clarified under COA Memorandum No. 2010-014 dated April 22, 2010, authorization by local Sanggunian for the Local Chief Executive to enter into contract in case of enacted budget</li>
                <li>Evidence of Invitation of three observers in all stages of the procurement process pursuant to Section 13.1 of the Revised IRR of RA No. 9184</li>
                <li>Request for purchase or requisition of supplies, materials and equipment duly approved by proper authorities</li>
                <li>Bill/Statement of Account</li>
                <li>Copy of newspaper clippings evidencing publication and/or CD in case of TV/Radio commercial</li>
            </ul>
        </article>
        <nav>
            <div>
                <form style="font-size: 18px; " >
                    <div>
                        <h4 style="margin:5px">JEV Number :</h4>
                        <input style="width: 95%;" type="text" id="myInput" placeholder="Enter JEV No." class="jev_num">
                    </div>
                    <div>
                        <h4 style="margin:5px">Check Number :</h4>
                        <input style="width: 95%;" type="text" id="myInput" placeholder="Enter Check No." class="check_num">
                    </div>
                    <div>
                        <h4 style="margin:5px">Amount</h4>
                        <input style="width: 95%;" type="text" id="myInput" placeholder="Enter Amount" class="amount">
                    </div>
                    <div>
                        <h4 style="margin:5px">Status</h4>
                    </div>
                    <div class="styled-select slate" style="width: 300px">
                        <select id="sel_opt" class="status">
                            <option value="Submitted" class="status">Submitted</option>
                            <option value="Unsubmitted" class="status">Unsubmitted</option>
                            <option value="Cancelled" class="status">Cancelled</option>
                        </select>
                    </div>
                    <div>
                        <h4 style="margin:5px">Voucher Number :</h4>
                        <input style="width: 95%;" type="text" id="myInput" placeholder="Enter Voucher No." class="voucher_num">
                    </div>
                    <div>
                        <h4 style="margin:5px">Date of Voucher :</h4>
                        <input style="width: 95%;" type="text" id="myInput" placeholder="Enter Date of Voucher" class="voucher_date">
                    </div>
                    <div>
                        <h4 style="margin:5px">Payee :</h4>
                        <input style="width: 95%;" type="text" id="myInput" placeholder="Enter Payee" class="payee">
                    </div>
                    <div>
                        <h4 style="margin:5px">Source of Fund :</h4>
                        <input style="width: 95%;" type="text" id="myInput" placeholder="Enter Source of Fund" class="source_fund">
                    </div>
                    <div>
                        <h4 style="margin:5px">Type of Transaction :</h4>
                        <input style="width: 95%;" type="text" id="myInput" value="Advertising Expenses"  class="transaction_type">
                    </div>
                    <div>
                        <h4 style="margin:5px">Submitted Documents :</h4>
                        <input style="width: 95%;" type="text" id="myInput" placeholder="List" class="sub_doc">
                    </div>
                    <div>
                        <h4 style="margin:5px">Unsubmitted Documents :</h4>
                        <input style="width: 95%;" type="text" id="myInput" placeholder="List" class="unsub_doc">
                    </div>
                    <br><br><br>
                    <button type="submit " form="form1 " value="Submit " id="savedata">SAVE</button>
                </form>
            </div>
        </nav>
    </section>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="checklist.js"></script>
    <script type="text/javascript">
        $(document).ready(() => {
            own_url = window.location.href;
            arr = own_url.split("=");
            id = arr[1];
            arr2 = own_url.split("/")
            real_url = arr2[3]
            arr3 = real_url.split("?")
            sav_url =arr3[0]
            //console.log(sav_url);
            if(id){
                $.ajax({
                    url:'update_record/'+id,
                    type:'get',
                    dataType:'json',
                    success: function(ret){
                        //console.log(ret['res']);
                        data=ret['res'];
                        $('.jev_num').val(data[0].jev_num);
                        $('.check_num').val(data[0].check_num);
                        $('.amount').val(data[0].amount);
                        $('.status').val(data[0].status);
                        $('.voucher_num').val(data[0].voucher_num);
                        $('.voucher_date').val(data[0].voucher_date);
                        $('.payee').val(data[0].payee);
                        $('.source_fund').val(data[0].source_fund);
                        $('.transaction_type').val(data[0].transaction_type);
                        $('.sub_doc').val(data[0].sub_doc);
                        $('.unsub_doc').val(data[0].unsub_doc);
                        //$("#update_modal").modal('show');
                    }
                })
            }
            $('#savedata').click(() => {
                if(!id){                    
                    $.ajax({                        // all URLs are relative to http://localhost:3000/
                url: 'insert_record',
                        type: 'get',
                dataType: 'json',
                data: {
                        jev_num: $('.jev_num').val(),
                        check_num: $('.check_num').val(),
                        amount: $('.amount').val(),
                        status: $('#sel_opt').val(),
                        voucher_num: $('.voucher_num').val(),
                        voucher_date: $('.voucher_date').val(),
                        payee: $('.payee').val(),
                        source_fund: $('.source_fund').val(),
                        transaction_type: $('.transaction_type').val(),
                        sub_doc: $('.sub_doc').val(),
                                unsub_doc: $('.unsub_doc').val(),
                                own_url:sav_url
                },
                success: (data) => {
                            window.location.replace("http://localhost:3000");
                        },
                    });
                } else {
                    //alert("update")
                    $.ajax({
                        url:"realupdate_record",
                        type:'get',
                        dataType:'json',
                        data: {
                                jev_id: id,
                                jev_num: $('.jev_num').val(),
                                check_num: $('.check_num').val(),
                                amount: $('.amount').val(),
                                status: $('#sel_opt').val(),
                                voucher_num: $('.voucher_num').val(),
                                voucher_date: $('.voucher_date').val(),
                                payee: $('.payee').val(),
                                source_fund: $('.source_fund').val(),
                                transaction_type: $('.transaction_type').val(),
                                sub_doc: $('.sub_doc').val(),
                                unsub_doc: $('.unsub_doc').val(),
                                own_url:sav_url
                },
                        success: function(ret) {
                            console.log("update success")
                            window.location.replace("http://localhost:3000");
                        } 
                });
                }
            });
        });
    </script>
</body>

</html>